<!DOCTYPE html> <html lang="en"> <head> <title>Getting started · Æsh</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="" name="description"> <meta content="" name="author"> <link href="http://static.jboss.org/theme/css/bootstrap-community/2.3.1.0/bootstrap-community.min.css" media="screen" rel="stylesheet"> <!--[if lt IE 9]><script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--> <link href="http://static.jboss.org/images/example/favicon.ico" rel="shortcut icon"> <link href="http://static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="http://static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="http://static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="http://static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <script src="http://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> </head> <body> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div class="container" id="content"> <div class="dropup"> <a class="tabnav-closed" href="https://www.jboss.org" id="tab">Red Hat</a> </div> <div class="banner"> <a href="#"></a> <div class="taglinelight visible-desktop">æsh; another extendable shell</div> </div> <div class="navbar navbar-inverse" id="navbar-fix"> <div class="navbar-inner"> <div class="container"> <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a> <div class="nav-collapse collapse"> <ul class="nav"> <li class=""><a href="http://aeshell.github.io/index.html">Home</a></li> <li class=""><a href="http://aeshell.github.io/downloads.html">Downloads</a></li> <li class=""><a href="http://aeshell.github.io/docs.html">Documentation</a></li> <li class=""><a href="https://issues.jboss.org/browse/AESH">Issues</a></li> <li class=""><a href="http://aeshell.github.io/contribute.html">Contribute</a></li> </ul> </div> </div> </div> </div> <div class="row-fluid"> <div id="equalHeightsLayout"> <div class="span3 well" id="leftcol"> <h2>Docs</h2> <ul class="icons-ul"> <li> <i class="icon-li icon-chevron-sign-right"></i> <a href="/docs/base/index.html"> Getting started </a> </li> <li> <i class="icon-li icon-chevron-sign-right"></i> <a href="/docs/base/completion.html"> Completion </a> </li> <li> <i class="icon-li icon-chevron-sign-right"></i> <a href="/docs/base/redirection.html"> Redirection </a> </li> <li> <i class="icon-li icon-chevron-sign-right"></i> <a href="/docs/base/settings.html"> Settings </a> </li> <li> <i class="icon-li icon-chevron-sign-right"></i> <a href="/docs/base/editingmode.html"> Editing </a> </li> <li> <i class="icon-li icon-chevron-sign-right"></i> <a href="/docs/base/utils.html"> Utils </a> </li> <li> <i class="icon-li icon-chevron-sign-right"></i> <a href="/docs/base/parser.html"> Command Line Parser </a> </li> <li> <i class="icon-li icon-chevron-sign-right"></i> <a href="/docs/base/alias.html"> Aliases </a> </li> <li> <i class="icon-li icon-chevron-sign-right"></i> <a href="/docs/base/faq.html"> FAQ </a> </li> </ul> </div> <div class="span9" id="maincol"> <h1>Getting started</h1> <br> Since Æsh is created to be extended and used by other applications it doesn't do much on its own. However, it is very easy to get started with a simple application. <br> Let's start with a simple demonstration: <div> <pre><code>public class AeshExample {&#x000A;    public static void main(String[] args) {&#x000A;&#x000A;        Settings settings = new SettingsBuilder().logging(true).create();&#x000A;        AeshConsole aeshConsole = new AeshConsoleBuilder().settings(settings)&#x000A;                .prompt(new Prompt(&quot;[aesh@rules]$ &quot;))&#x000A;                .command(ExitCommand.class)&#x000A;                .command(LsCommand.class)&#x000A;                .create();&#x000A;&#x000A;        aeshConsole.start();&#x000A;    }&#x000A;&#x000A;    @CommandDefinition(name=&quot;exit&quot;, description = &quot;exit the program&quot;)&#x000A;    public static class ExitCommand implements Command {&#x000A;        @Override&#x000A;        public CommandResult execute(AeshConsole console, ControlOperator operator) throws IOException {&#x000A;            console.stop();&#x000A;            return CommandResult.SUCCESS;&#x000A;        }&#x000A;    }&#x000A;&#x000A;    @CommandDefinition(name=&quot;ls&quot;, description = &quot;fooing&quot;)&#x000A;    public static class LsCommand implements Command {&#x000A;        @Option&#x000A;        private String color;&#x000A;&#x000A;        @Arguments&#x000A;        private List&lt;File&gt; files;&#x000A;&#x000A;        @Override&#x000A;        public CommandResult execute(AeshConsole console, ControlOperator operator) throws IOException {&#x000A;            if(files != null) {&#x000A;              for(File f : files)&#x000A;                console.out().print(f.toString());&#x000A;            }&#x000A;            return CommandResult.SUCCESS;&#x000A;        }&#x000A;    }&#x000A;}</code></pre> </div> <br> Here we create a small program that only have two methods; ls and exit. All the command line parsing, population of the option values are all done by æsh. The annotation used to specify the command is identical to what is used in the <a href="parser.html">Command Line Parser page.</a> The only addition is the Command interface that needs to be implemented as well. Using this API is the easiest way to get you started and should suffice for most cases. <p></p> <br> <h4>Console API</h4> The original public api was targeted around the Console is still supported and have been steadily improved. The biggest change compared to earlier version is that Console now reads from the inputstream in a separate thread. This opens up a lot of possibilities, but also require some changes to the api. The Console.readLine(..) method is gone and now Console provides a callback to handle the input sent from the terminal (an example will be shown below). The way you send data to the out/error streams have also changed a bit. Instead of directly calling a method on Console you now fetch a PrintWriter for either out/error and print to it. - just remember that there is not automatically flushing of the print statements only when using println. <p></p> Here is a very short code that will start Æsh using the Console API: <div> <pre><code class="java">import org.jboss.aesh.console.*;&#x000A;public class Example {&#x000A;  &#x000A;  Console console = new Console(new SettingsBuilder().create());&#x000A;  &#x000A;  final ConsoleCallback consoleCallback = new ConsoleCallback() {&#x000A;    @Override&#x000A;    public int readConsoleOutput(ConsoleOperation operation) throws IOException{&#x000A;        console.out().println(&quot;======&gt;\&quot;&quot; + operation.getBuffer());&#x000A;        if (operation.getBuffer().equals(&quot;quit&quot;) || operation.getBuffer().equals(&quot;exit&quot;)) {&#x000A;            console.stop();&#x000A;        }&#x000A;    }&#x000A;  };&#x000A;  console.setCallback(consoleCallback);&#x000A;  console.start();&#x000A;}</code></pre> </div> <br> As you notice this example doesnt do much other than registrering the given input and printing it again. <h3>Interact with Æsh</h3> <p> As mentioned the two different APIs provides two different ways of interacting with Æsh. The more high level API when using </p> <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/console/AeshConsole.java">AeshConsole</a> enforce you to interact with in the <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/console/Command.java">Command</a> execute method and the Completer API. For most CLI programs this would be sufficient and should handle most usecases. <br> If you need to support a more "unconventional" option/value syntax or parser strategy you might have to use the low level API. <br> <br> <h3>ConsoleCallback</h3> When using the Console API the way you receive user input is with a <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/console/ConsoleCallback.java">ConsoleCallback.</a> The registered ConsoleCallback is called each time a user press enter and it is possible to change the registered callback when needed. <br> The data object thats sent from the Console is a <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/console/ConsoleOperation.java">ConsoleOperation object:</a> <ul class="icons-ul"> <li><i class="icon-li icon-chevron-sign-right"></i>buffer: user input </li> <li><i class="icon-li icon-chevron-sign-right"></i>redirectOrPipe: if either piping or redirecting is used, this is set to true. </li> </ul> <h3>Piping and Redirecting</h3> <p></p> Æsh supports piping and redirecting similar to who it works in various Unix shells. Read more <a href="/docs/base/redirection.html">here</a>. <br> <h3>Settings</h3> <p></p> In addition to the settings a user can define in the <a href="/docs/base/editingmode.html">init file</a> the developer can also define a lot of settings in Æsh. Read more about settings <a href="/docs/base/settings.html">here</a>. <br> <h3>Provided Examples</h3> <p></p> As mentioned above, Æsh provides two simple examples that you can use as a quick intro to the API. There is on example each for the two different APIs. <br> <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/Example.java">Example.java</a> show how to use the low level API. To run it, simply do; <kbd> java -cp aesh-{version}.jar Example </kbd> <br> <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/AeshExample.java">AeshExample.java</a> show how to use the high level API. To run it, simply do; <kbd> java -cp aesh-{version}.jar AeshExample </kbd> </div> </div> </div> </div> <footer class="container"> <div class="row-fluid"> <div class="span2 offset1"> <h4>Navigate</h4> <ul> <li> <a href="http://aeshell.github.io/docs/base/index.html" title="Get Started">Get Started</a> </li> <li> <a href="http://aeshell.github.io/contribute.html" title="Get Involved">Get Involved</a> </li> <li> <a href="http://aeshell.github.io/downloads.html" title="Download">Download</a> </li> </ul> </div> <div class="span2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/AESH" title="Submit a bug">Submit a bug</a> </li> <li> <a href="http://aeshell.github.io/contribute.html" title="Write code">Write Code</a> </li> </ul> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="http://static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="http://static.jboss.org/theme/js/libs/bootstrap-community/2.3.1.0/bootstrap-community.min.js"></script> </body> </html>