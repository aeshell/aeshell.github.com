<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Command Line Parser · Æsh</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="description">
    <meta content="" name="author">
    <link href="/stylesheets/bootstrap-community.css" media="screen" rel="stylesheet">
    <!-- IE 6-8 support of HTML 5 elements -->
    <!--[if lt IE 9]>
      <script src="/cache/static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script>
    <![endif]-->
    <!-- Defines the project favicon. Change these URLs to your specific project folder on static.jboss.org. -->
    <link href="/cache/static.jboss.org/images/example/favicon.ico" rel="shortcut icon">
    <link href="/cache/static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
    <link href="/cache/static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
    <link href="/cache/static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
    <link href="/cache/static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed">
    <!-- Defines the project banner. Change these URLs to your specific project folder on static.jboss.org -->
    <!-- :css -->
    <!-- @media (min-width: 980px) { -->
    <!-- .banner { background-image: url(#{site.project_images_url}/#{site.project}-banner-1180px.png); height: 110px;  } -->
    <!-- } -->
    <!-- @media (max-width: 979px) { -->
    <!-- .banner { background-image: url(#{site.project_images_url}/#{site.project}-logo.png); background-repeat:no-repeat; height: 60px; } -->
    <!-- } -->
    <!-- @media (max-width: 650px) { -->
    <!-- .banner { width: 200px; margin: 0px auto; } -->
    <!-- } -->
    <script src="/cache/static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.js"></script>
  </head>
  <body>
    <!-- begin accesibility skip to top -->
    <ul class="visuallyhidden" id="top">
      <li>
        <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a>
      </li>
      <li>
        <a accesskey="c" href="#page" title="Skip to content">Skip to content</a>
      </li>
    </ul>
    <div class="container" id="content">
      <div class="dropup">
        <a class="tabnav-closed" href="https://www.jboss.org" id="tab">Red Hat</a>
      </div>
      <div class="banner">
        <a href="#"></a>
        <div class="taglinelight visible-desktop">æsh; another extendable shell</div>
      </div>
      <div class="navbar navbar-inverse" id="navbar-fix">
        <div class="navbar-inner">
          <div class="container">
            <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li class=""><a href="http://localhost:4242/index.html">Home</a></li>
                <li class=""><a href="http://localhost:4242/downloads.html">Downloads</a></li>
                <li class=""><a href="http://localhost:4242/docs.html">Documentation</a></li>
                <li class=""><a href="https://issues.jboss.org/browse/AESH">Issues</a></li>
                <li class=""><a href="http://localhost:4242/contribute.html">Contribute</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- /        %ul.nav.pull-right -->
      <!-- /          %li -->
      <!-- /            %form.navbar-search -->
      <!-- /              %input.search-query#projectsearch(type="text" placeholder="Search") -->
      <div class="row-fluid">
        <div id="equalHeightsLayout">
          <div class="span3 well" id="leftcol">
            <h2>Docs</h2>
            <ul class="icons-ul">
              <li>
                <i class="icon-li icon-chevron-sign-right"></i>
                <a href="/docs/base/index.html">
                  Getting started
                </a>
              </li>
              <li>
                <i class="icon-li icon-chevron-sign-right"></i>
                <a href="/docs/base/completion.html">
                  Completion
                </a>
              </li>
              <li>
                <i class="icon-li icon-chevron-sign-right"></i>
                <a href="/docs/base/redirection.html">
                  Redirection
                </a>
              </li>
              <li>
                <i class="icon-li icon-chevron-sign-right"></i>
                <a href="/docs/base/settings.html">
                  Settings
                </a>
              </li>
              <li>
                <i class="icon-li icon-chevron-sign-right"></i>
                <a href="/docs/base/editingmode.html">
                  Editing
                </a>
              </li>
              <li>
                <i class="icon-li icon-chevron-sign-right"></i>
                <a href="/docs/base/utils.html">
                  Utils
                </a>
              </li>
              <li>
                <i class="icon-li icon-chevron-sign-right"></i>
                <a href="/docs/base/parser.html">
                  Command Line Parser
                </a>
              </li>
              <li>
                <i class="icon-li icon-chevron-sign-right"></i>
                <a href="/docs/base/alias.html">
                  Aliases
                </a>
              </li>
              <li>
                <i class="icon-li icon-chevron-sign-right"></i>
                <a href="/docs/base/faq.html">
                  FAQ
                </a>
              </li>
            </ul>
          </div>
          <div class="span9" id="maincol">
            <p></p>
            <h1>Command Line Parser</h1>
            Æsh provide a Command Line Parser API which make it very easy to parse command lines. The command line parser is independant of the Console API, but can be used with it if wanted. The API support defining the commands you want parsed both with annotations and with a builder pattern.
            <p></p>
            <h2>Annotations</h2>
            Probably the easiest way to define a parser is by using annotations. The annotation must be defined at class level and is called <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/cl/CommandDefinition.java">CommandDefinition</a>.
            CommandDefinition is the only strong requirement, but without any Options or Arguments the command would not accept any attributes.
            There are four different option types:
            <p></p>
            <div>
              <ul class="icons-ul">
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/cl/Option.java">Option</a>
                  </b>
                  is the simplest kind of Option with only one value
                  <br>
                  Example: -h foo
                  <p></p>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/cl/OptionList.java">OptionList</a>
                  </b>
                  can contain several values. It must be defined in connection to a field that implements Collection.
                  <br>
                  Example: --foo bar1,bar2,bar3
                  <p></p>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/cl/OptionGroup.java">OptionGroup</a>
                  </b>
                  is similar to OptionList in that it store several values, but OptionGroup also store the key given. This annotation must be used in connection to a field that implements Map.
                  <br>
                  Example: -Dname1=value1 -Dname2=value2
                  <p></p>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/cl/Arguments.java">Arguments</a>
                  </b>
                  defines the possible arguments thats given to a command. It do not require any option key, but as OptionList it require that the field must implement Collection.
                </li>
              </ul>
            </div>
            <br>
            <p></p>
            <h4>A simple first example:</h4>
            <div>
              <pre><code>@CommandDefinition(name = &quot;example1&quot;, description = &quot;a simple example&quot;)&#x000A;public class Example1 {&#x000A;&#x000A;  @Option(name = &quot;X&quot;, description = &quot;enable X&quot;, hasValue = false)&#x000A;  private Boolean enableX;&#x000A;&#x000A;  @Option(shortName = 'e', name = &quot;equal&quot;, description = &quot;enable equal&quot;, required = true)&#x000A;  private String equal;&#x000A;&#x000A;  @Option(shortName = 'i', name = &quot;int1&quot;)&#x000A;  private Integer int1;&#x000A;&#x000A;  @OptionList&#x000A;  public List&lt;String&gt; values;&#x000A;&#x000A;  public Boolean getEnableX() { return enableX; }&#x000A;  public String getEqual() { return equal; }&#x000A;  public List&lt;String&gt; getValues() { return values; }&#x000A;}</code></pre>
            </div>
            So lets make it a bit more interesting and say that we want to use this class to parse an line like:
            "example1 --X --equal blabla --values one,two,three"
            <div>
              <pre><code>Example1 example1 = new Example1();&#x000A;//this will throw an error if the object do not use the required annotations and&#x000A;//if the line contain option name/values that do not match the defined options&#x000A;ParserGenerator.parseAndPopulate(example1, &quot;example1 --X --equal blabla --values one,two,three&quot;);&#x000A;assertTrue(example1.getEnableX());&#x000A;assertEquals(&quot;blabla&quot;, example1.getEqual());&#x000A;assertEquals(&quot;one&quot;, example1.getValues().get(0));</code></pre>
            </div>
            A lot of the different settings are available for each option type which are described below.
            <p></p>
            <h3>Option</h3>
            The different Option types have some common elements like:
            <div>
              <ul class="icons-ul">
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    name
                  </b>
                  <ul>
                    <li>The option name. If it's not set the field name will be used. Two dashes (--) are added to the name on the command line.</li>
                  </ul>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    shortName
                  </b>
                  <ul>
                    <li>
                      The short option name. If it's not set the first char of name will be used. One dash (-) is added to the short name on the command line.
                    </li>
                  </ul>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    description
                  </b>
                  <ul>
                    <li>
                      A simple description of the option. This info is displayed when help info is shown.
                    </li>
                  </ul>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    required
                  </b>
                  <ul>
                    <li>
                      Specify if this option is required. Defaults to false.
                    </li>
                  </ul>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    defaultValue[]
                  </b>
                  <ul>
                    <li>
                      Specify the default value(s) that will be used if the option do not have any value. Defaults to empty array.
                    </li>
                  </ul>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    hasValue
                  </b>
                  <ul>
                    <li>
                      Define if this option should have a value connected to it. Only possible to set this to true when the field type is Boolean/boolean. Default is true.
                    </li>
                  </ul>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    converter
                  </b>
                  <ul>
                    <li>
                      Specify a custom converter for the data type of the connected field.
                    </li>
                  </ul>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    completer
                  </b>
                  <ul>
                    <li>
                      Specify a custom completer
                    </li>
                  </ul>
                </li>
                <li><i class="icon-li icon-chevron-sign-right"></i><b>
                    validator
                  </b>
                  <ul>
                    <li>
                      Specify a custom validator
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
            <h3>Converter</h3>
            When using a "custom" type for a field a converter is needed to inject the correct value. To ensure this we created a simple interface that all the converter implementations need to implement:
            <div>
              <pre><code>public interface CLConverter&lt;T&gt; {&#x000A;  T convert(String input);&#x000A;}</code></pre>
            </div>
            Lets show an example of a rather simple (and ignorant) CurrencyConverter:
            <div>
              <pre><code>import java.util.Currency;&#x000A;&#x000A;public class CurrencyConverter implements CLConverter&lt;Currency&gt; {&#x000A;  @Override&#x000A;  public Currency convert(String input) {&#x000A;    return Currency.getInstance(input);&#x000A;  }&#x000A;}</code></pre>
            </div>
            A more production friendly converter would try to do some validation of the input etc...
            <h3>Completer</h3>
            <p>
              Note that a completer is not needed if you only want to parse a command line and just populate the values. But if you are creating your own commands and want the possibility to autocomplete the values you need a completer.
            </p>
            Aesh already have a built in completer for Files and Boolean/booleans, all other types require adefined completer.
            <br>
            The Completer interface looks like:
            <div>
              <pre><code>public interface OptionCompleter {&#x000A;  CompleterData complete(String completeValue);&#x000A;}</code></pre>
            </div>
            <br>
            A FooCompleter
            <div>
              <pre><code>public class FooOptionCompleter {&#x000A;  @Override&#x000A;  public CompleterData complete(String completeValue) {&#x000A;    List&lt;String&gt; values = new ArrayList&lt;String&gt;();&#x000A;    if(completeValue == null || completeValue.length() == 0)&#x000A;      values.add(&quot;Foo&quot;);&#x000A;    else if(&quot;Foo&quot;.startsWith(completeValue))&#x000A;      values.add(&quot;Foo&quot;)&#x000A;    return new CompleterData(values);&#x000A;  }&#x000A;}</code></pre>
            </div>
            <h3>Validator</h3>
            <p></p>
            The validator is optional and will be executed during population of the option value. The validator interface looks like:
            <div>
              <pre><code>public interface OptionValidator&lt;T&gt; {&#x000A;  void validate(T value) throws OptionValidatorException;&#x000A;}</code></pre>
            </div>
            Note that implementations of this interface must have an empty constructor.
            <br>
            <h2>Builder</h2>
            It is also possible to create a parser by using the builder classes. As with annotations there are two classes; <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/cl/ParserBuilder.java">ParserBuilder</a> and <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/cl/OptionBuilder.java">OptionBuilder</a>.
            A simple example on how they can be used:
            How the parser is used is described in the section below.
            <h2>Usage</h2>
            When using annotations you create the parser like:
            bc(prettyprint linenums). CommandLineParser parser = ParserGenerator.generateParser(MyCommand1.class);
            With a builder you use:
            bc(prettyprint linenums). CommandLineParser parser = ParserBuilder(....).generateParser();
            The <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/cl/CommandLineParser.java">CommandLineParser</a> object has two tasks. First is to parse a command line and the other is to print out usage info based on the defined parameter and options.
            To parse a line simply do:
            bc(prettyprint linenums). CommandLine cl = commandLineParser.parse(inputString);
            The <a href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/cl/CommandLine.java">CommandLine</a> class have many defined methods of checking if specific options where enabled and with what value.
            Please note that if any unspecified options are found an IllegalArgumentException will be thrown. Also, if a required option is not found or options specified with a value, but is not given any an IllegalArgumentException will be thrown.
            The CommandLine also feature a nice way of printing out a usage text (help info). This text is parsed from the defined parameter/options.
          </div>
        </div>
      </div>
    </div>
    <footer class="container">
      <div class="row-fluid">
        <div class="span2 offset1">
          <h4>Navigate</h4>
          <ul>
            <li>
              <a href="http://localhost:4242/docs/base/index.html" title="Get Started">Get Started</a>
            </li>
            <li>
              <a href="http://localhost:4242/contribute.html" title="Get Involved">Get Involved</a>
            </li>
            <li>
              <a href="http://localhost:4242/downloads.html" title="Download">Download</a>
            </li>
          </ul>
        </div>
        <div class="span2">
          <h4>Contribute</h4>
          <ul>
            <li>
              <a href="https://issues.jboss.org/browse/AESH" title="Submit a bug">Submit a bug</a>
            </li>
            <li>
              <a href="http://localhost:4242/contribute.html" title="Write code">Write Code</a>
            </li>
          </ul>
        </div>
      </div>
    </footer>
    <!-- /    .span3.offset1 -->
    <!-- /      %h4 LGPL 2.1 License -->
    <!-- /      %p All dependencies of this project are available under the LGPL or a compatible license. -->
    <!-- /      %p -->
    <!-- /      .jbossbadge -->
    <!-- /        %a{:href => "http://www.jboss.org/"} -->
    <!-- /          %img{:src => "/cache/static.jboss.org/theme/images/common/jbossbadge.png"}/ -->
    <div class="container" id="companyfooter">
      <div class="redhatlogo">
        <div id="logospacer"></div>
        <a href="http://www.redhat.com/"><img src="/cache/static.jboss.org/theme/images/common/redhat_logo.png"></a>
      </div>
    </div>
    <span class="backToTop">
      <a href="#top">back to top</a>
    </span>
    <script src="/javascripts/bootstrap-community.js"></script>
  </body>
</html>
