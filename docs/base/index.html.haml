---
layout: docs
title: Getting started
index: 1
---

%h1 Getting started

%br
  
Since Æsh is created to be extended and used by other applications it doesn't do much on its own. However, it is very easy to get started with a simple application (- we also provide two small example applications in the jar called AeshExample and Example (read about them at the bottom of this page)). From version 0.40 we created a new API as well with the goal to provide an even easier API than what we already had. With the use of the rewritten command line parser we created a new high level API that would make it even easier to create a comman line program. Let us show you an example:
%div
  %pre
    %code
      = preserve do
        :escaped
          public class AeshExample {
              public static void main(String[] args) {

                  Settings settings = new SettingsBuilder().logging(true).create();
                  AeshConsole aeshConsole = new AeshConsoleBuilder().settings(settings)
                          .prompt(new Prompt("[aesh@rules]$ "))
                          .command(ExitCommand.class)
                          .command(LsCommand.class)
                          .create();

                  aeshConsole.start();
              }

              @CommandDefinition(name="exit", description = "exit the program")
              public static class ExitCommand implements Command {
                  @Override
                  public CommandResult execute(AeshConsole console, ControlOperator operator) throws IOException {
                      console.stop();
                      return CommandResult.SUCCESS;
                  }
              }

              @CommandDefinition(name="ls", description = "fooing")
              public static class LsCommand implements Command {
                  @Option
                  private String color;

                  @Arguments
                  private List<File> files;

                  @Override
                  public CommandResult execute(AeshConsole console, ControlOperator operator) throws IOException {
                      if(files != null) {
                        for(File f : files)
                          console.out().print(f.toString());
                      }
                      return CommandResult.SUCCESS;
                  }
              }
          }

%br
Here we create a small program that only have two methods; ls and exit. All the command line parsing, population of the option values are all done by æsh. The annotation used to specify the command is identical to what is used in the 
%a(href="parser.html") Command Line Parser page.
The only addition is the Command interface that needs to be implemented as well. Using this API is the easiest way to get you started and should suffice for most cases.

%p
%br

%h4 Console API

The original public api was targeted around the Console is still supported and have been steadily improved. The biggest change compared to earlier version is that Console now reads from the inputstream in a separate thread. This opens up a lot of possibilities, but also require some changes to the api. The Console.readLine(..) method is gone and now Console provides a callback to handle the input sent from the terminal (an example will be shown below). The way you send data to the out/error streams have also changed a bit. Instead of directly calling a method on Console you now fetch a PrintWriter for either out/error and print to it. - just remember that there is not automatically flushing of the print statements only when using println.

%p
Here is a very short code that will start Æsh using the Console API:
%div
  %pre
    %code.java
      = preserve do
        :escaped
          import org.jboss.aesh.console.*;
          public class Example {
            
            Console console = new Console(new SettingsBuilder().create());
            
            final ConsoleCallback consoleCallback = new ConsoleCallback() {
              @Override
              public int readConsoleOutput(ConsoleOperation operation) throws IOException{
                  console.out().println("======>\"" + operation.getBuffer());
                  if (operation.getBuffer().equals("quit") || operation.getBuffer().equals("exit")) {
                      console.stop();
                  }
              }
            };
            console.setCallback(consoleCallback);
            console.start();
          }

%br
As you notice this example doesnt do much other than registrering the given input and printing it again.

%h3 Interact with Æsh

%p
  As mentioned the two different APIs provides two different ways of interacting with Æsh. The more high level API when using 
%a(href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/console/AeshConsole.java") AeshConsole
enforce you to interact with in the 
%a(href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/console/Command.java") Command
execute method and the Completer API. For most CLI programs this would be sufficient and should handle most usecases.
%br
If you need to support a more "unconventional" option/value syntax or parser strategy you might have to use the low level API.

%br

%br
%h3 ConsoleCallback


When using the Console API the way you receive user input is with a 
%a(href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/console/ConsoleCallback.java") ConsoleCallback.  
The registered ConsoleCallback is called each time a user press enter and it is possible to change the registered callback when needed.
%br
The data object thats sent from the Console is a 
%a(href="https://github.com/aeshell/aesh/blob/master/src/main/java/org/jboss/aesh/console/ConsoleOperation.java") ConsoleOperation object:        
%ul.icons-ul
  %li
    %i.icon-li.icon-chevron-sign-right>
    buffer: user input
  %li
    %i.icon-li.icon-chevron-sign-right>
    redirectOrPipe: if either piping or redirecting is used, this is set to true.
    
    
%h3 Piping and Redirecting

%p
Æsh supports piping and redirecting similar to who it works in various Unix shells. Read more <a href="/docs/base/redirection.html">here</a>.
%br

%h3 Settings

%p
In addition to the settings a user can define in the <a href="/docs/base/editingmode.html">init file</a> the developer can also define a lot of settings in Æsh. Read more about settings <a href="/docs/base/settings.html">here</a>.
%br

%h3 Provided Examples

%p
As mentioned above, Æsh provides two simple examples that you can use as a quick intro to the API. There is on example each for the two different APIs. 
%br
%a(href="https://github.com/aeshell/aesh/blob/master/src/main/java/Example.java") Example.java
show how to use the low level API. To run it, simply do;
%kbd
  java -cp aesh-{version}.jar Example
%br
%a(href="https://github.com/aeshell/aesh/blob/master/src/main/java/AeshExample.java") AeshExample.java
show how to use the high level API. To run it, simply do;
%kbd
  java -cp aesh-{version}.jar AeshExample
